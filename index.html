<!doctype html>
<html>
<head>
<style>
	body{ margin:0; }

	svg{
		position:absolute;
	}

	.stage{
		background-color: skyblue;
	}

	svg *{
		fill:black;
	}
</style>
</head>
<body>
	<div class="mixablz">
		<svg class="stage"></svg>
		<svg class="interface"></svg>
	</div>
</body>

<script>

	// XML CLASS
	XML = function(name){
		var namespace = 'http://www.w3.org/2000/svg';
		this.element = document.createElementNS(namespace,name);
	}

	XML.prototype.attr = function(name,value){
		this.element.setAttributeNS(null,name,value);
	}

	// MASTER CLASS
	CURVEMIXER = function(element){
		// storage
		this.container = element;
		this.interface = element.querySelector('.interface');
		this.stage = element.querySelector('.stage');
		this.paths = [];
		this.anchors = [];
		// Attach DOM Listeners
		this.container.onmousemove = this.mousemove;
		this.container.onmousedown = this.mousedown;
		this.container.onmouseup = this.mouseup;
		this.container.onmousewheel = this.mousewheel;
		this.container.addEventListener("keydown", this.keydown);
		this.container.addEventListener("keyup", this.keyup);
		this.container.addEventListener("keypress", this.keypress);
	}

	// Render
	CURVEMIXER.prototype.renderInterface = function() {
		console.log('Building interface');

		for(var i=0; i<this.anchors.length; i++){
			var doop = new XML('circle');
			doop.attr('cx',this.anchors[i].coordinates.x);
			doop.attr('cy',this.anchors[i].coordinates.y);
			doop.attr('r',3);
			this.interface.appendChild(doop.element);
		}
	}

	// Event functions
	CURVEMIXER.prototype.mousemove = function(event){
		//console.log('move',event);
		//RenderInterface();
	};

	CURVEMIXER.prototype.mousedown = function(event){
//		console.log('down',event);
//		this.RenderInterface();
	};

	CURVEMIXER.prototype.mouseup = function(event){
//		console.log('up',event);
//		this.RenderInterface();
		var new_anchor = new ANCHOR('M',event);
		console.log(new_anchor);
		mixer.anchors.push(new_anchor);
		mixer.renderInterface();
	};

	CURVEMIXER.prototype.mousewheel = function(event){
		event.preventDefault();
//		console.log('wheel',event);
//		this.RenderInterface();
	};

	CURVEMIXER.prototype.keydown = function(event){
//		console.log('key dn',event.keyCode,event);
//		this.RenderInterface();
	};

	CURVEMIXER.prototype.keyup = function(event){
//		console.log('key up',event.keyCode,event);
//		this.RenderInterface();
	};

	CURVEMIXER.prototype.keypress = function(event){
//		console.log('key press',event.keyCode,event);
//		this.RenderInterface();
	};

	// PATH CLASS
	PATH = function(){
		this.classes = [];
		this.anchors = [];
	};

	PATH.prototype.addClass = function(name){
		this.classes.push(name);
	}

	// ANCHOR CLASS
	ANCHOR = function(type,coordinates){
		var types = ['spiro-4','levein-4'];
		this.type = type;
		this.coordinates = {
			x: coordinates.x
			,y: coordinates.y
		};
	}

	ANCHOR.prototype.setCoordinates = function(coordinates){
		this.coordinates.x = coordinates.x;
		this.coordinates.y = coordinates.y;
	}

	//////////

	mixer = new CURVEMIXER(document.querySelector('.mixablz'));

</script>

</html>